\hypertarget{classTests__Reference}{}\doxysection{Tests\+\_\+\+Reference$<$ T $>$ Class Template Reference}
\label{classTests__Reference}\index{Tests\_Reference$<$ T $>$@{Tests\_Reference$<$ T $>$}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classTests__Reference_a64720566cf38a118662c3eb8851b1fe5}\label{classTests__Reference_a64720566cf38a118662c3eb8851b1fe5}} 
{\bfseries Tests\+\_\+\+Reference} (size\+\_\+t Nx, size\+\_\+t Ny, size\+\_\+t Nz, bool allow\+\_\+cuda\+\_\+aware, size\+\_\+t \mbox{\hyperlink{classTests__Reference_ae49fbeb39ee3ff15c0258b809b475a76}{P1}}, size\+\_\+t \mbox{\hyperlink{classTests__Reference_ac5db227aed95c4a66ae1195406271db6}{P2}})
\item 
int \mbox{\hyperlink{classTests__Reference_acc8f406b0bf8bb11ef998e3782ddf27c}{run}} (const int testcase, const int runs)
\begin{DoxyCompactList}\small\item\em Executes the selected testcase for the specified number of repetitions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{classTests__Reference_a29c1b1031eff9655f248fa15e3771b65}{testcase0}} (const int runs)
\begin{DoxyCompactList}\small\item\em A simple reference testcase, where the complete input is gathered on a single MPI rank to compute the complete 3D FFT with \mbox{\hyperlink{structcuFFT}{cu\+FFT}}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classTests__Reference_a9f6fa914c673959ac7b85f3adf492138}{testcase1}} (const int runs)
\begin{DoxyCompactList}\small\item\em A simple reference testcase which measures the bandwidth in MB/s for each rank. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classTests__Reference_a66e6fb53ee55a673c79323b8c13a7f6d}\label{classTests__Reference_a66e6fb53ee55a673c79323b8c13a7f6d}} 
int {\bfseries initialize\+Rand\+Array} (void $\ast$in\+\_\+d, size\+\_\+t N1, size\+\_\+t N2)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classTests__Reference_a666f24aee1a724aeab872b32979219ba}\label{classTests__Reference_a666f24aee1a724aeab872b32979219ba}} 
size\+\_\+t {\bfseries Nx}
\item 
\mbox{\Hypertarget{classTests__Reference_a503ff52d6af10e6526afedac4fff183a}\label{classTests__Reference_a503ff52d6af10e6526afedac4fff183a}} 
size\+\_\+t {\bfseries Ny}
\item 
\mbox{\Hypertarget{classTests__Reference_a07e914fe4ede809883b5f0d284291412}\label{classTests__Reference_a07e914fe4ede809883b5f0d284291412}} 
size\+\_\+t {\bfseries Nz}
\item 
\mbox{\Hypertarget{classTests__Reference_ae49fbeb39ee3ff15c0258b809b475a76}\label{classTests__Reference_ae49fbeb39ee3ff15c0258b809b475a76}} 
size\+\_\+t {\bfseries P1}
\begin{DoxyCompactList}\small\item\em Number of partitions in x-\/direction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classTests__Reference_ac5db227aed95c4a66ae1195406271db6}\label{classTests__Reference_ac5db227aed95c4a66ae1195406271db6}} 
size\+\_\+t {\bfseries P2}
\begin{DoxyCompactList}\small\item\em Number of partitions in y-\/direction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classTests__Reference_a0a1c9fb52c2ba294179aff1ad5a5156e}\label{classTests__Reference_a0a1c9fb52c2ba294179aff1ad5a5156e}} 
bool {\bfseries cuda\+\_\+aware} = false
\begin{DoxyCompactList}\small\item\em Indicates, whether CUDA-\/aware MPI is available {\bfseries{and}} selected. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classTests__Reference_a1ed178c7caca9999870d051f44234110}\label{classTests__Reference_a1ed178c7caca9999870d051f44234110}} 
\mbox{\hyperlink{classTimer}{Timer}} $\ast$ {\bfseries timer}
\begin{DoxyCompactList}\small\item\em Benchmark timer. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classTests__Reference_ae701e9222e4d2df9d316cded7c83b53d}\label{classTests__Reference_ae701e9222e4d2df9d316cded7c83b53d}} 
std\+::vector$<$ std\+::string $>$ {\bfseries section\+\_\+descriptions} = \{\char`\"{}init\char`\"{}, \char`\"{}Finished Send\char`\"{}, \char`\"{}3D FFT\char`\"{}, \char`\"{}Finished Receive\char`\"{}, \char`\"{}Run complete\char`\"{}\}
\begin{DoxyCompactList}\small\item\em Tags for the different timer sections. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classTests__Reference_acc8f406b0bf8bb11ef998e3782ddf27c}\label{classTests__Reference_acc8f406b0bf8bb11ef998e3782ddf27c}} 
\index{Tests\_Reference$<$ T $>$@{Tests\_Reference$<$ T $>$}!run@{run}}
\index{run@{run}!Tests\_Reference$<$ T $>$@{Tests\_Reference$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
int \mbox{\hyperlink{classTests__Reference}{Tests\+\_\+\+Reference}}$<$ T $>$\+::run (\begin{DoxyParamCaption}\item[{const int}]{testcase,  }\item[{const int}]{runs }\end{DoxyParamCaption})}



Executes the selected testcase for the specified number of repetitions. 


\begin{DoxyParams}{Parameters}
{\em testcase} & It should hold $0 \leq testcase \leq 0$ \\
\hline
{\em runs} & Specifies the number of repetitions. The argument is passed to the selected testcase. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classTests__Reference_a29c1b1031eff9655f248fa15e3771b65}\label{classTests__Reference_a29c1b1031eff9655f248fa15e3771b65}} 
\index{Tests\_Reference$<$ T $>$@{Tests\_Reference$<$ T $>$}!testcase0@{testcase0}}
\index{testcase0@{testcase0}!Tests\_Reference$<$ T $>$@{Tests\_Reference$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{testcase0()}{testcase0()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
int \mbox{\hyperlink{classTests__Reference}{Tests\+\_\+\+Reference}}$<$ T $>$\+::testcase0 (\begin{DoxyParamCaption}\item[{const int}]{runs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



A simple reference testcase, where the complete input is gathered on a single MPI rank to compute the complete 3D FFT with \mbox{\hyperlink{structcuFFT}{cu\+FFT}}. 

For a given grid $P_1 \times P_1$, each rank starts by generating random input data for $\frac{N_x}{P_1} \cdot \frac{N_y}{P_2} \cdot N_z$. Afterwards each rank sends the data to rank 0. Here we simply wait for all input data to arrive and compute the complete 3D FFT. Finally, rank 0 distributes the computed result to the individual ranks, such that each rank ends up with the same partition $\frac{N_x}{P_1} \cdot \frac{N_y}{P_2} \cdot \lfloor \frac{N_z}{2}+1 \rfloor$.


\begin{DoxyParams}{Parameters}
{\em runs} & Specifies the number of repetitions \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classTests__Reference_a9f6fa914c673959ac7b85f3adf492138}\label{classTests__Reference_a9f6fa914c673959ac7b85f3adf492138}} 
\index{Tests\_Reference$<$ T $>$@{Tests\_Reference$<$ T $>$}!testcase1@{testcase1}}
\index{testcase1@{testcase1}!Tests\_Reference$<$ T $>$@{Tests\_Reference$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{testcase1()}{testcase1()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
int \mbox{\hyperlink{classTests__Reference}{Tests\+\_\+\+Reference}}$<$ T $>$\+::testcase1 (\begin{DoxyParamCaption}\item[{const int}]{runs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



A simple reference testcase which measures the bandwidth in MB/s for each rank. 

Each process generates a random input of size $N_x*N_y*N_z$. Afterwards the same data is send to all other ranks. If cuda\+\_\+aware is disabled, the input data is copied in each $\ast$ iteration to pinned memory. There are multiple available options to consider\+:
\begin{DoxyItemize}
\item opt=0\+: MPI uses Peer2\+Peer communication
\item opt=1\+: MPI uses All2\+All communication
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em runs} & specifies the number of iterations across which the benchmark averages the result. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
tests/include/tests\+\_\+reference.\+hpp\end{DoxyCompactItemize}
